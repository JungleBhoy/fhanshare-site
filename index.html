<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FhanShare25 Web</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
  <style>
    body { font-family: sans-serif; padding: 20px; max-width: 500px; margin: auto; background: #f4f4f4; }
    h1 { text-align: center; color: #333; }
    input, button { padding: 10px; margin: 5px 0; width: 100%; border: 1px solid #ccc; border-radius: 5px; }
    button { background: #007BFF; color: white; cursor: pointer; transition: background 0.3s ease; }
    button:hover { background: #0056b3; }
    #qr { margin-top: 20px; text-align: center; }
    .supporter { display: flex; justify-content: space-between; align-items: center; margin-top: 10px; background: #fff; padding: 10px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    footer { text-align: center; font-size: 12px; margin-top: 30px; color: #777; }
  </style>
</head>
<body>
  <h1>FhanShare25 Web</h1>

  <label for="card">Season Card Info:</label>
  <input type="text" id="card" placeholder="Enter your card details" />

  <label for="email">Supporter Email:</label>
  <input type="email" id="email" placeholder="Enter supporter email" />
  <button onclick="addSupporter()">Add Supporter</button>

  <h3>Supporters</h3>
  <div id="supporterList"></div>

  <div id="qr"></div>

  <footer>
    <p>&copy; 2025 FhanShare25. Built for fans, by fans.</p>
  </footer>

  <script>
    let supporters = JSON.parse(localStorage.getItem('supporters')) || [];

    function saveSupporters() {
      localStorage.setItem('supporters', JSON.stringify(supporters));
    }

    function addSupporter() {
      const emailInput = document.getElementById('email');
      const cardInput = document.getElementById('card');
      const email = emailInput.value.trim();
      if (!email || supporters.includes(email)) return;
      supporters.push(email);
      saveSupporters();
      emailInput.value = '';
      renderSupporters(cardInput.value);
    }

    function renderSupporters(cardDetails) {
      const list = document.getElementById('supporterList');
      list.innerHTML = '';
      supporters.forEach((email, index) => {
        const div = document.createElement('div');
        div.className = 'supporter';
        div.innerHTML = `
          <span>${email}</span>
          <button onclick="shareCard('${email}', '${cardDetails}')">Share</button>
        `;
        list.appendChild(div);
      });
    }

    function shareCard(email, cardDetails) {
      const data = JSON.stringify({ to: email, card: cardDetails, time: new Date().toISOString() });
      const qrContainer = document.getElementById('qr');
      qrContainer.innerHTML = `<p>QR for: ${email}</p>`;
      QRCode.toCanvas(document.createElement('canvas'), data, function (err, canvas) {
        if (err) console.error(err);
        qrContainer.appendChild(canvas);
      });
    }

    document.addEventListener('DOMContentLoaded', () => {
      const cardInput = document.getElementById('card');
      renderSupporters(cardInput.value);
    });
  </script>
</body>
</html>
